CREATE TABLE [dbo].[PENDING_CHANGE] (
    [PENDING_CHANGE_ID]             INT           IDENTITY (1, 1) NOT NULL,
    [TABLE_NAME]                    VARCHAR (128) NOT NULL,
    [COLUMN_NAME]                   VARCHAR (128) NOT NULL,
    [PRIMARY_KEY_VALUE]             INT           NOT NULL,
    [OLD_VALUE]                     VARCHAR (500) NOT NULL,
    [NEW_VALUE]                     VARCHAR (500) NOT NULL,
    [CREATE_DATE]                   DATETIME      CONSTRAINT [DF_PENDING_CHANGE_CREATE_DATE] DEFAULT (getdate()) NOT NULL,
    [CREATED_BY_USER_ID]            INT           NOT NULL,
    [IS_COMMITTED]                  BIT           CONSTRAINT [DF_PENDING_CHANGE_IS_COMMITTED] DEFAULT ((0)) NOT NULL,
    [COMMIT_DATE]                   DATETIME      NULL,
    [COMMITED_BY_USER_ID]           INT           NULL,
    [APPROVER_ONE_USER_ID]          INT           NOT NULL,
    [APPROVER_ONE_APPROVED]         BIT           CONSTRAINT [DF_PENDING_CHANGE_APPROVER_ONE_APPROVED] DEFAULT ((0)) NOT NULL,
    [APPROVER_ONE_APPROVAL_DATE]    DATETIME      NULL,
    [APPROVER_ONE_REJECTED]         BIT           CONSTRAINT [DF_PENDING_CHANGE_APPROVER_ONE_REJECTED] DEFAULT ((0)) NOT NULL,
    [APPROVER_ONE_REJCTED_DATE]     DATETIME      NULL,
    [APPROVER_ONE_REJECTION_REASON] VARCHAR (100) NULL,
    [APPROVER_TWO_USER_ID]          INT           NOT NULL,
    [APPROVER_TWO_APPROVED]         BIT           CONSTRAINT [DF_PENDING_CHANGE_APPROVER_TWO_APPROVED] DEFAULT ((0)) NOT NULL,
    [APPROVER_TWO_APPROVAL_DATE]    DATETIME      NULL,
    [APPROVER_TWO_REJECTED]         BIT           CONSTRAINT [DF_PENDING_CHANGE_APPROVER_TWO_REJECTED] DEFAULT ((0)) NOT NULL,
    [APPROVER_TWO_REJECTED_DATE]    DATETIME      NULL,
    [APPROVER_TWO_REJECTION_REASON] VARCHAR (100) NULL,
    [FRIENDLY_COLUMN_NAME]          VARCHAR (128) NULL,
    [OLD_VALUE_DISPLAY]             VARCHAR (500) NULL,
    [NEW_VALUE_DISPLAY]             VARCHAR (500) NULL,
    CONSTRAINT [PK_PENDING_CHANGE] PRIMARY KEY CLUSTERED ([PENDING_CHANGE_ID] ASC),
    CONSTRAINT [FK_PENDING_CHANGE_CommitUser] FOREIGN KEY ([COMMITED_BY_USER_ID]) REFERENCES [dbo].[PdtsUser] ([USER_ID]),
    CONSTRAINT [FK_PENDING_CHANGE_CreateUser] FOREIGN KEY ([CREATED_BY_USER_ID]) REFERENCES [dbo].[PdtsUser] ([USER_ID]),
    CONSTRAINT [FK_PENDING_CHANGE_PdtsUser] FOREIGN KEY ([APPROVER_ONE_USER_ID]) REFERENCES [dbo].[PdtsUser] ([USER_ID]),
    CONSTRAINT [FK_PENDING_CHANGE_PdtsUser1] FOREIGN KEY ([APPROVER_TWO_USER_ID]) REFERENCES [dbo].[PdtsUser] ([USER_ID]),
    CONSTRAINT [FK_PENDING_CHANGE_Provider] FOREIGN KEY ([PRIMARY_KEY_VALUE]) REFERENCES [dbo].[Provider] ([PDTS_PROVIDER_ID])
);

